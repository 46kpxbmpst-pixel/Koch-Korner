<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dein Kochbuch – HTML (Dark Mode)</title>
  <!-- Tailwind Play CDN, damit die bestehenden Klassen funktionieren -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .shrinkable { transition: transform 200ms ease, padding 200ms ease; }
    .shrink { transform: scale(0.95) translateY(-4px); }
  </style>
</head>
<body class="min-h-screen bg-neutral-950 text-neutral-100">
  <div id="app"></div>

  <script>
    // --- Dummy-Daten (wie im React-Code) ---
    const CATEGORIES = [
      "Pasta","Vegan","Vegetarisch","Fleisch","Fisch","Suppe","Dessert","Frühstück","Salat","Schnell & Easy",
    ];

    const RECIPES = [
      { id: "r1", title: "Cremige Tomaten-Pasta", categories: ["Pasta","Vegetarisch","Schnell & Easy"], ingredients: ["Pasta","Tomate","Sahne","Basilikum","Knoblauch"], image: "https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1600&auto=format&fit=crop", time: 20, portions: 2, steps: ["Pasta in Salzwasser kochen.","Knoblauch anrösten, mit Tomaten und Sahne ablöschen.","Mit Salz, Pfeffer und Basilikum abschmecken.","Mit Pasta vermengen und servieren."] },
      { id: "r2", title: "Zitronen-Lachs vom Blech", categories: ["Fisch","Schnell & Easy"], ingredients: ["Lachs","Zitrone","Olivenöl","Knoblauch","Kartoffeln"], image: "https://images.unsplash.com/photo-1615937691194-97dbd3f30b54?q=80&w=1600&auto=format&fit=crop", time: 30, portions: 2, steps: ["Backofen auf 200°C vorheizen.","Kartoffeln vorschneiden und auf Blech geben.","Lachs mit Zitrone, Öl, Salz & Pfeffer würzen und aufs Blech legen.","Alles gemeinsam backen bis gar."] },
      { id: "r3", title: "Fluffige Pfannkuchen", categories: ["Frühstück","Dessert","Vegetarisch"], ingredients: ["Mehl","Milch","Ei","Backpulver","Zucker"], image: "https://images.unsplash.com/photo-1495214783159-3503fd1b572d?q=80&w=1600&auto=format&fit=crop", time: 15, portions: 3, steps: ["Teig anrühren (Mehl, Milch, Ei, Backpulver, Zucker).","In Pfanne portionsweise ausbacken.","Mit Ahornsirup oder Beeren servieren."] },
    ];

    // --- State ---
    let query = "";
    let activeCats = [];
    let selectedRecipe = null;

    // --- Helpers ---
    function filterRecipes(q, cats) {
      const s = (q || "").trim().toLowerCase();
      return RECIPES.filter(r => {
        const matchesQuery = !s || r.title.toLowerCase().includes(s) || r.ingredients.join(" ").toLowerCase().includes(s) || r.categories.join(" ").toLowerCase().includes(s);
        const matchesCats = cats.length === 0 || cats.every(c => r.categories.includes(c));
        return matchesQuery && matchesCats;
      });
    }

    function escapeHtml(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');}

    // --- Rendering ---
    function renderApp(){
      const root = document.getElementById('app');
      root.innerHTML = selectedRecipe ? renderDetail(selectedRecipe) : renderHome();
      if(selectedRecipe){ bindDetailEvents(); } else { bindHomeEvents(); }
    }

    function renderHome(){
      const showResults = query.trim().length > 0 || activeCats.length > 0;
      const filtered = filterRecipes(query, activeCats);
      return `
        <div class="min-h-screen">
          <!-- HERO: wie React-Version (kleiner) -->
          <section class="relative h-[50vh] min-h-[360px] w-full">
            <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=2400&auto=format&fit=crop" alt="Hero" class="absolute inset-0 h-full w-full object-cover" />
            <div class="absolute inset-0 bg-black/40"></div>

            <!-- Suche + Kategorien (sticky) -->
            <div class="sticky top-0 z-30 flex w-full flex-col items-center justify-center shrinkable" id="searchWrap">
              <div class="mx-4 mt-4 w-full max-w-3xl py-4" id="searchPad">
                <div class="flex items-center gap-2 rounded-2xl bg-neutral-900/70 backdrop-blur-md shadow-lg ring-1 ring-neutral-700 px-4 py-3">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 opacity-70"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 4.23 12.014l3.753 3.753a.75.75 0 1 0 1.06-1.06l-3.752-3.754A6.75 6.75 0 0 0 10.5 3.75Zm-5.25 6.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z" clip-rule="evenodd"/></svg>
                  <input id="searchInput" value="${escapeHtml(query)}" placeholder="Rezepte oder Zutaten suchen…" class="w-full bg-transparent placeholder-white/80 text-white caret-white focus:outline-none text-base md:text-lg" />
                  ${(query || activeCats.length>0)?`<button id="resetBtn" class="rounded-xl px-3 py-1 text-sm font-medium text-neutral-100 hover:bg-white/10">Zurücksetzen</button>`:''}
                </div>
              </div>

              <!-- Kategorien direkt unter der Suche -->
              <div class="mt-4 z-20">
                <div class="mx-auto flex max-w-5xl flex-wrap items-center justify-center gap-2 px-4">
                  ${CATEGORIES.map(c=>{
                    const active = activeCats.includes(c);
                    return `<button data-cat="${c}" class="rounded-full px-4 py-2 text-sm font-medium shadow ring-1 backdrop-blur-md transition ${active? 'bg-neutral-200 text-neutral-900 ring-neutral-300':'bg-black/40 text-neutral-100 ring-white/20 hover:bg-black/30'}">${c}</button>`;
                  }).join('')}
                </div>
              </div>
            </div>
          </section>

          <!-- Ergebnisse / Vorschläge -->
          <main class="mx-auto -mt-10 w-full max-w-6xl px-4 pb-24">
            <div class="mb-6 flex items-center justify-between">
              <h2 class="text-xl font-semibold tracking-tight">${showResults? 'Ergebnisse':'Beliebte Rezepte'}</h2>
              ${showResults? `<p class="text-sm text-neutral-400">${filtered.length} Rezept${filtered.length===1? '':'e'} gefunden</p>`: ''}
            </div>
            <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3">
              ${(showResults? filtered: RECIPES).map(r=>renderCard(r)).join('')}
            </div>
          </main>

          <!-- Footer -->
          <footer class="border-t border-neutral-800 bg-neutral-900/70 backdrop-blur">
            <div class="mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 px-4 py-8 text-sm text-neutral-400 md:flex-row">
              <p>© ${new Date().getFullYear()} Dein Kochbuch</p>
              <div class="flex items-center gap-3">
                <a class="hover:underline" href="#">Impressum</a>
                <a class="hover:underline" href="#">Datenschutz</a>
                <a class="hover:underline" href="#">Kontakt</a>
              </div>
            </div>
          </footer>
        </div>`;
    }

    function renderCard(r){
      return `
        <article class="group cursor-pointer overflow-hidden rounded-2xl bg-neutral-900 shadow-sm ring-1 ring-neutral-800" data-open="${r.id}">
          <div class="relative aspect-[4/3] w-full overflow-hidden">
            <img src="${r.image}" alt="${escapeHtml(r.title)}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-black/0 to-transparent"></div>
            <div class="absolute bottom-2 left-2 rounded-full bg-black/60 px-2 py-1 text-xs text-white backdrop-blur-md">${r.time} Min • ${r.portions} Port.</div>
          </div>
          <div class="space-y-2 p-4">
            <h3 class="line-clamp-2 text-base font-semibold leading-snug">${escapeHtml(r.title)}</h3>
            <div class="flex flex-wrap gap-1">
              ${r.categories.slice(0,3).map(c=>`<span class="rounded-full bg-neutral-800 px-2 py-1 text-xs text-neutral-300">${c}</span>`).join('')}
            </div>
          </div>
        </article>`;
    }

    function renderDetail(recipe){
      return `
        <div class="min-h-screen">
          <div class="relative h-[38vh] min-h-[300px] w-full">
            <img src="${recipe.image}" alt="${escapeHtml(recipe.title)}" class="absolute inset-0 h-full w-full object-cover" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-black/20 to-transparent"></div>
            <button id="backBtn" class="absolute left-4 top-4 rounded-full bg-neutral-900/70 px-4 py-2 text-sm font-medium text-neutral-100 shadow backdrop-blur hover:bg-neutral-900">← Zur Übersicht</button>
          </div>
          <div class="mx-auto w-full max-w-3xl px-4 py-6">
            <h1 class="mb-2 text-2xl font-extrabold tracking-tight md:text-3xl">${escapeHtml(recipe.title)}</h1>
            <p class="text-neutral-400">${recipe.time} Minuten • ${recipe.portions} Portionen</p>
          </div>
          <div class="mx-auto grid w-full max-w-5xl gap-6 px-4 pb-24 md:grid-cols-5">
            <section class="md:col-span-2">
              <h2 class="mb-3 text-lg font-semibold">Zutaten</h2>
              <ul class="list-disc space-y-2 pl-5 text-neutral-200">
                ${recipe.ingredients.map(ing=>`<li>${escapeHtml(ing)}</li>`).join('')}
              </ul>
            </section>
            <section class="md:col-span-3">
              <h2 class="mb-3 text-lg font-semibold">Zubereitung</h2>
              <ol class="list-decimal space-y-3 pl-5 text-neutral-200">
                ${recipe.steps.map(s=>`<li>${escapeHtml(s)}</li>`).join('')}
              </ol>
            </section>
          </div>
        </div>`;
    }

    // --- Events ---
    function bindHomeEvents(){
      const input = document.getElementById('searchInput');
      if(input){ input.addEventListener('input', e=>{ query = e.target.value; renderApp(); }); }
      const resetBtn = document.getElementById('resetBtn');
      if(resetBtn){ resetBtn.addEventListener('click', ()=>{ query = ""; activeCats = []; renderApp(); }); }

      document.querySelectorAll('[data-cat]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const c = btn.getAttribute('data-cat');
          activeCats = activeCats.includes(c) ? activeCats.filter(x=>x!==c) : [...activeCats, c];
          renderApp();
        });
      });

      document.querySelectorAll('[data-open]').forEach(card=>{
        card.addEventListener('click', ()=>{
          const id = card.getAttribute('data-open');
          selectedRecipe = RECIPES.find(r=>r.id===id) || null;
          window.scrollTo({ top: 0, behavior: 'smooth' });
          renderApp();
        });
      });

      const wrap = document.getElementById('searchWrap');
      let last = 0;
      window.addEventListener('scroll', ()=>{
        const y = window.scrollY || 0;
        if(!wrap) return;
        if(y>180 && last<=180) wrap.classList.add('shrink');
        if(y<=180 && last>180) wrap.classList.remove('shrink');
        last = y;
      }, { passive: true });
    }

    function bindDetailEvents(){
      const backBtn = document.getElementById('backBtn');
      if(backBtn){ backBtn.addEventListener('click', ()=>{ selectedRecipe = null; renderApp(); }); }
    }

    // Start
    renderApp();
  </script>
</body>
</html>
